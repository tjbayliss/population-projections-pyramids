/*
  Project: Future Forces Population Projections interactive dashboard
  Filename: aleph-futureForces-alephConstructObject-general-script.js
  Date built: December 2020 to March 2021
  Written By: James Bayliss (Data Vis Developer)
  Tech Stack: HTML5, CSS3, JS ES5/6, D3 (v5), JQuery 
*/
console.log("aleph-futureForces-alephConstructObject-general-script.js");

var svg = d3.select("#aleph-line-chart");

// Initialisation of global 'aleph' object construct. Stores all main dynamic variables for UI design and response
var aleph = {
  /*
  GENERAL & ALL CHARTS
  */
  lineOnload: true,
  pyramidOnload: true,
  inputFieldnames: {},
  parseDate: d3.timeParse("%Y"),
  formatDate: d3.timeFormat("%Y"),
  selectionLists: {
    lines: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"],
    regions: [
      "North East",
      "North West",
      "Yorkshire and The Humber",
      "East Midlands",
      "West Midlands",
      "East of England",
      "London",
      "South East",
      "South West",
      "Wales",
      "Scotland",
      "Northern Ireland",
    ],
    ethnicities: [
      "White",
      "Mixed",
      "Indian/Other Asian",
      "Pakistani/Bangladeshi",
      "Black",
      "Other Ethnic Origins",
    ],
    ageBands: [
      "<16",
      "16 and 17",
      "18 and 19",
      "20 to 24",
      "25 to 34",
      "35 to 44",
      "45 to 54",
      "55 to 66",
      "67 and over",
    ],
    genders: ["Male", "Female"],
    nationalities: ["UK", "Non-UK"],
    health: [
      "Full health",
      "Full health, Only Asthma",
      "Full health, Other health probs and/or disability",
      "Medium health",
      "Medium health, Only Asthma",
      "Medium health, Other health probs and/or disability",
      "Poor health",
    ],
    religions: [
      "Christian (all denominations)",
      "Muslim",
      "Other religions",
      "No religion/Not stated",
    ],
    qualifications: [
      "Higher education",
      "A-levels or equivalent",
      "GCSEs or equivalent",
      "Other/no qualifications",
    ],
    sortOrder: [
      "Region",
      "<16",
      "16 and 17",
      "18 and 19",
      "20 to 24",
      "25 to 34",
      "35 to 44",
      "45 to 54",
      "55 to 66",
      "67 and over",
    ],
  },
  codes: {
    lines: {
      0: "1 line",
      1: "2 lines",
      2: "3 lines",
      3: "4 lines",
      4: "5 lines",
      5: "6 lines",
      6: "7 lines",
      7: "8 lines",
      8: "9 lines",
      9: "10 lines",
    },
    regions: {
      0: "North East",
      1: "North West",
      2: "Yorkshire and The Humber",
      3: "East Midlands",
      4: "West Midlands",
      5: "East of England",
      6: "London",
      7: "South East",
      8: "South West",
      9: "Wales",
      10: "Scotland",
      11: "Northern Ireland",
      /*       0: "East Midlands",
      1: "East of England",
      2: "London",
      3: "North East",
      4: "North West",
      5: "South East",
      6: "South West",
      7: "West Midlands",
      8: "Yorkshire and The Humber",
      9: "Northern Ireland",
      10: "Scotland",
      11: "Wales", */
    },
    ethnicities: {
      0: "White",
      1: "Mixed",
      2: "Indian/Other Asian",
      3: "Pakistani/Bangladeshi",
      4: "Black",
      5: "Other Ethnic Origins",
    },
    ageBands: {
      0: "<16",
      1: "16 and 17",
      2: "18 and 19",
      3: "20 to 24",
      4: "25 to 34",
      5: "35 to 44",
      6: "45 to 54",
      7: "55 to 66",
      8: "67 and over",
    },
    genders: {
      0: "Males",
      1: "Females",
    },
    nationalities: {
      0: "UK",
      1: "Non-UK",
    },
    religions: {
      0: "Christian (all denominations)",
      1: "Muslim",
      2: "Other religions",
      3: "No religion/Not stated",
    },
    health: {
      0: "Full health",
      1: "Full health, Only Asthma",
      2: "Full health, Other health probs and/or disability",
      3: "Medium health",
      4: "Medium health, Only Asthma",
      5: "Medium health, Other health probs and/or disability",
      6: "Poor health",
    },
    qualifications: {
      0: "Higher education",
      1: "A-levels or equivalent",
      2: "GCSEs or equivalent",
      3: "Other/no qualifications",
    },
    sortOrder: {
      0: "Region",
      1: "<16",
      2: "16 and 17",
      3: "18 and 19",
      4: "20 to 24",
      5: "25 to 34",
      6: "35 to 44",
      7: "45 to 54",
      8: "55 to 66",
      9: "67 and over",
    },
  },
  margin: {
    line: {
      vs: { top: 75, bottom: 100, left: 150, right: 110 },
      sm: { top: 75, bottom: 100, left: 150, right: 110 },
      md: { top: 75, bottom: 100, left: 150, right: 110 },
      lg: { top: 75, bottom: 100, left: 150, right: 110 },
      xl: { top: 75, bottom: 100, left: 225, right: 110 },
      sl: { top: 75, bottom: 100, left: 225, right: 200 },
      top: 100,
      bottom: 100,
      left: 225,
      right: 250,
      sparklineAxis: { top: 0, right: 0, bottom: 0, left: 0 },
    },
    top: 75,
    bottom: 100,
    left: 225,
    right: 250,
  },
  colours: [
    "#7B67A8",
    "#36BCEE",
    "#2EB5B2",
    "#FDDD3E",
    "#EF7835",
    /* COMPLEMENTARY */
    "#E0D863",
    "#E0A463",
    "#E09063",
    "#6863E0",
    "#63E0E0",
  ],
  coloursSubset: [],
  /* currentNumberOfSavedScenarios: 0, */
  currentNumberOfSavedScenarios: -1,
  currentScenarioNumber: -1,
  maxNumberOfLines: 5,
  axisMainTitles: {
    lineChart: { x: "Year", y: "Number" },
    pyramidChart: {
      x: "Percentage of population in Age Band, by Gender",
      y: "",
    },
    dotChart: { x: "Percentage", y: "Region" },
  },
  currentChart: /* "line" */ "pyramid",
  mainChart: null,
  /*
  LINE CHART
  */
  /*  allValidArrays :false, */
  lineCanBeBinned: false,
  selectionRectangle: {
    x: 0,
    y: 0,
    currentX: 0,
    currentY: 0,
    originX: 0,
    originY: 0,
    element: null,
    previousElement: null,
    width: 0,
    height: 0,
  },
  chartDraggedCoordinates: [[], []],
  lineChartTransitionDuration: 1250,
  dateDomain: { start: 2019, end: 2040 },
  sparkLineToolTipDimensions: {
    /* dimension and positioning attributes for tooltip */ width: 150,
    height: 300,
    verticalLabelSpacing: 35 /* vertical spacing between text lines */,
    margin: { top: 100, right: 20, bottom: 5, left: 20 },
    informationArray:
      [] /* blank array to contain information estracted from ingested data file to display on tooltip */,
  },
  toolTipDimensions: {
    /* dimension and positioning attributes for tooltip */ width: 475,
    height: 300,
    verticalLabelSpacing: 35 /* vertical spacing between text lines */,
    margin: { top: 100, right: 20, bottom: 5, left: 20 },
    informationArray:
      [] /* blank array to contain information estracted from ingested data file to display on tooltip */,
  },
  scenariosData: [],
  dataScenarioMaximums: {},
  tickIconMarkerCounter: -1,
  tickIconMarkerSpacer: 50,
  lineChartYAxisRounding: 500000,
  selectionIndexes: {
    ethnicities: [],
    ageBands: [],
    genders: [],
    nationalities: [],
    religions: [],
    health: [],
    qualifications: [],
  },
  currentlySelectedScenario: {
    ethnicity: null,
    ageband: null,
    gender: null,
    nationality: null,
    religion: null,
    health: null,
    qualification: null,
  },
  scenarios: {},
  /*
  PYRAMID CHART
  */
  annualTotalPopulations: [],
  coupledChartsCount: 0,
  mouseDragState: false,
  ageRange_MaleCount: 0,
  ageRange_FemaleCount: 0,
  ageRange_MalePercent: 0.0,
  ageRange_FemalePercent: 0.0,
  pyramids: ["left", "right"],
  barChartScaleFactor: 1.15,
  pyramidDataBarClicked: false,
  pyramidOutlines: {
    left: { male: [], female: [] },
    right: { male: [], female: [] },
  },
  pyramidHalfWidthScalingFactor: 2,
  pyramidOffset: 25,
  pyramidOffsetVerticalOffset:15,
  pyramidXAxisWidth: 300,
  pyramidLateralPosition: { left: 0.25, right: 0.75 },
  pyramidMargin: {
    top: 125,
    bottom: 145,
    left: 60,
    right: 60,
  },
  freezeOutlines: "unlock",
  countsPercents: "percent",
  pyramidTransitionLength: 250,
  setInterval: 2500,
  pyramidDelay: 5,
  pyramidYear: 2019,
  pyramidYearIndex: 0,
  pyramidCurrentScenarios: {
    left: {
      ethnicities: [],
      regions: [],
    },
    right: {
      ethnicities: [],
      regions: [],
    },
  },
  pyramidFullData_v2: { left: [], right: [] },
  xAxisMaximums: {
    values: { count: -1, percent: -1 },
    roundings: { count: 100000, percent: /* 1 */ 0.2 },
  },
  pyramidFullOutlineData: {},
  SYOAs: [
    "0",
    "1",
    "2",
    "3",
    "4",
    "5",
    "6",
    "7",
    "8",
    "9",
    "10",
    "11",
    "12",
    "13",
    "14",
    "15",
    "16",
    "17",
    "18",
    "19",
    "20",
    "21",
    "22",
    "23",
    "24",
    "25",
    "26",
    "27",
    "28",
    "29",
    "30",
    "31",
    "32",
    "33",
    "34",
    "35",
    "36",
    "37",
    "38",
    "39",
    "40",
    "41",
    "42",
    "43",
    "44",
    "45",
    "46",
    "47",
    "48",
    "49",
    "50",
    "51",
    "52",
    "53",
    "54",
    "55",
    "56",
    "57",
    "58",
    "59",
    "60",
    "61",
    "62",
    "63",
    "64",
    "65",
    "66",
    "67",
    "68",
    "69",
    "70",
    "71",
    "72",
    "73",
    "74",
    "75",
    "76",
    "77",
    "78",
    "79",
    "80",
    "81",
    "82",
    "83",
    "84",
    "85",
    "86",
    "87",
    "88",
    "89",
    "90+",
    /*     "91",
    "92",
    "93",
    "94",
    "95",
    "96",
    "97",
    "98",
    "99",
    "100",
    "101",
    "102",
    "103",
    "104",
    "105 - 109",
    "110 and over", */
  ],
  /*
  DOT CHART
  */
  swatchWidth: 75,
  swatchHeight: 25,
  dot_legend_labels: [
    "<16",
    "16 and 17",
    "18 and 19",
    "20 to 24",
    "25 to 34",
    "35 to 44",
    "45 to 54",
    "55 to 66",
    "67 and over",
  ],
  dotMargin: {
    top: 100,
    bottom: 100,
    left: 250,
    right: 100,
  },
  regionsArray: [
    "North East",
    "North West",
    "Yorkshire and The Humber",
    "East Midlands",
    "West Midlands",
    "East of England",
    "London",
    "South East",
    "South West",
    "Wales",
    "Scotland",
    "Northern Ireland",
    /*     "East Midlands",
    "East of England",
    "London",
    "North East",
    "North West",
    "Northern Ireland",
    "Scotland",
    "South East",
    "South West",
    "Wales",
    "West Midlands",
    "Yorkshire and The Humber", */
  ],
  regionsObject: {
    1: "North East",
    2: "North West",
    3: "Yorkshire and The Humber",
    4: "East Midlands",
    5: "West Midlands",
    6: "East of England",
    7: "London",
    8: "South East",
    9: "South West",
    10: "Wales",
    11: "Scotland",
    12: "Northern Ireland",
    /*     1: "East Midlands",
    2: "East of England",
    3: "London",
    4: "North East",
    5: "North West",
    6: "Northern Ireland",
    7: "Scotland",
    8: "South East",
    9: "South West",
    10: "Wales",
    11: "West Midlands",
    12: "Yorkshire and The Humber", */
  },
  /*  nonYearFields: ["SEX", "Gender", "Age", "ETHNICITY", "Age Group"], */
  LineNonYearFields: [],
  PyramidNonYearFields: [],
  DotNonYearFields: [],
  data: {},
  dataToPlot: [],
  /*  criteria: ["ageband", "gender", "ethnicity", "nationality", "religion"], */
};
